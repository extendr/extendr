<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A safe and user friendly R extension interface."><meta name="keywords" content="rust, rustlang, rust-lang, extendr_api"><title>extendr_api - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../extendr_api/index.html"><div class="logo-container"><img src="https://raw.githubusercontent.com/extendr/extendr/master/extendr-logo-256.png" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../extendr_api/index.html"><div class="logo-container">
                    <img src="https://raw.githubusercontent.com/extendr/extendr/master/extendr-logo-256.png" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate extendr_api</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.2.0</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#attributes">Attribute Macros</a></li><li><a href="#derives">Derive Macros</a></li></ul></div></section><div id="sidebar-vars" data-name="extendr_api" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../extendr_api/index.html">
                        <img src="https://raw.githubusercontent.com/extendr/extendr/master/extendr-logo-256.png" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">extendr_api</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/extendr_api/lib.rs.html#1-957">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A safe and user friendly R extension interface.</p>
<ul>
<li>Build rust extensions to R.</li>
<li>Convert R packages to Rust crates.</li>
</ul>
<p>This library aims to provide an interface that will be familiar to
first-time users of Rust or indeed any compiled language.</p>
<p>See <a href="robj/struct.Robj.html" title="Robj">Robj</a> for much of the content of this crate.
<a href="robj/struct.Robj.html" title="Robj">Robj</a> provides a safe wrapper for the R object type.</p>
<h3 id="examples"><a href="#examples">Examples</a></h3>
<p>Use attributes and macros to export to R.</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;
<span class="comment">// Export a function or impl to R.</span>
<span class="attribute">#[<span class="ident">extendr</span>]</span>
<span class="kw">fn</span> <span class="ident">fred</span>(<span class="ident">a</span>: <span class="ident">i32</span>) -&gt; <span class="ident">i32</span> {
    <span class="ident">a</span> <span class="op">+</span> <span class="number">1</span>
}

<span class="comment">// define exports using extendr_module</span>
<span class="macro">extendr_module!</span> {
   <span class="kw">mod</span> <span class="ident">mymodule</span>;
   <span class="kw">fn</span> <span class="ident">fred</span>;    
}
</code></pre></div>
<p>In R:</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="ident">result</span> <span class="op">&lt;</span><span class="op">-</span> <span class="ident">fred</span>(<span class="number">1</span>)</code></pre></div>
<p><a href="robj/struct.Robj.html" title="Robj">Robj</a> is a wrapper for R objects.
The r!() and R!() macros let you build R objects
using Rust and R syntax respectively.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;
<span class="macro">test!</span> {
    <span class="comment">// An R object with a single string &quot;hello&quot;</span>
    <span class="kw">let</span> <span class="ident">character</span> <span class="op">=</span> <span class="macro">r!</span>(<span class="string">&quot;hello&quot;</span>);
    <span class="kw">let</span> <span class="ident">character</span> <span class="op">=</span> <span class="macro">r!</span>([<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;goodbye&quot;</span>]);
    
    <span class="comment">// An R integer object with a single number 1L.</span>
    <span class="comment">// Note that in Rust, 1 is an integer and 1.0 is a real.</span>
    <span class="kw">let</span> <span class="ident">integer</span> <span class="op">=</span> <span class="macro">r!</span>(<span class="number">1</span>);
    
    <span class="comment">// An R real object with a single number 1.</span>
    <span class="comment">// Note that in R, 1 is a real and 1L is an integer.</span>
    <span class="kw">let</span> <span class="ident">real</span> <span class="op">=</span> <span class="macro">r!</span>(<span class="number">1.0</span>);
    
    <span class="comment">// An R real vector.</span>
    <span class="kw">let</span> <span class="ident">real_vector</span> <span class="op">=</span> <span class="macro">r!</span>([<span class="number">1.0</span>, <span class="number">2.0</span>]);
    <span class="kw">let</span> <span class="ident">real_vector</span> <span class="op">=</span> <span class="kw-2">&amp;</span>[<span class="number">1.0</span>, <span class="number">2.0</span>].<span class="ident">iter</span>().<span class="ident">collect_robj</span>();
    <span class="kw">let</span> <span class="ident">real_vector</span> <span class="op">=</span> <span class="macro">r!</span>(<span class="macro">vec!</span>[<span class="number">1.0</span>, <span class="number">2.0</span>]);
    
    <span class="comment">// An R function object.</span>
    <span class="kw">let</span> <span class="ident">function</span> <span class="op">=</span> <span class="macro">R!</span>(<span class="string">&quot;function(x, y) { x + y }&quot;</span>)<span class="question-mark">?</span>;
    
    <span class="comment">// A named list using the list! macro.</span>
    <span class="kw">let</span> <span class="ident">list</span> <span class="op">=</span> <span class="macro">list!</span>(<span class="ident">a</span> <span class="op">=</span> <span class="number">1</span>, <span class="ident">b</span> <span class="op">=</span> <span class="number">2</span>);
    
    <span class="comment">// An unnamed list (of R objects) using the List wrapper.</span>
    <span class="kw">let</span> <span class="ident">list</span> <span class="op">=</span> <span class="macro">r!</span>(<span class="ident">List::from_values</span>(<span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));
    <span class="kw">let</span> <span class="ident">list</span> <span class="op">=</span> <span class="macro">r!</span>(<span class="ident">List::from_values</span>(<span class="macro">vec!</span>[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>]));
    <span class="kw">let</span> <span class="ident">list</span> <span class="op">=</span> <span class="macro">r!</span>(<span class="ident">List::from_values</span>(<span class="kw-2">&amp;</span>[<span class="macro">r!</span>(<span class="string">&quot;a&quot;</span>), <span class="macro">r!</span>(<span class="number">1</span>), <span class="macro">r!</span>(<span class="number">2.0</span>)]));

    <span class="comment">// A symbol</span>
    <span class="kw">let</span> <span class="ident">sym</span> <span class="op">=</span> <span class="macro">sym!</span>(<span class="ident">wombat</span>);

    <span class="comment">// A R vector using collect_robj()</span>
    <span class="kw">let</span> <span class="ident">vector</span> <span class="op">=</span> (<span class="number">0</span>..<span class="number">3</span>).<span class="ident">map</span>(<span class="op">|</span><span class="ident">x</span><span class="op">|</span> <span class="ident">x</span> <span class="op">*</span> <span class="number">10</span>).<span class="ident">collect_robj</span>();
}</code></pre></div>
<p>In Rust, we prefer to use iterators rather than loops.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;
<span class="macro">test!</span> {
    <span class="comment">// 1 ..= 100 is the same as 1:100</span>
    <span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="macro">r!</span>(<span class="number">1</span> ..<span class="op">=</span> <span class="number">100</span>);
    <span class="macro">assert_eq!</span>(<span class="ident">res</span>, <span class="macro">R!</span>(<span class="string">&quot;1:100&quot;</span>)<span class="question-mark">?</span>);
    
    <span class="comment">// Rust arrays are zero-indexed so it is more common to use 0 .. 100.</span>
    <span class="kw">let</span> <span class="ident">res</span> <span class="op">=</span> <span class="macro">r!</span>(<span class="number">0</span> .. <span class="number">100</span>);
    <span class="macro">assert_eq!</span>(<span class="ident">res</span>.<span class="ident">len</span>(), <span class="number">100</span>);
    
    <span class="comment">// Using map is a super fast way to generate vectors.</span>
    <span class="kw">let</span> <span class="ident">iter</span> <span class="op">=</span> (<span class="number">0</span>..<span class="number">3</span>).<span class="ident">map</span>(<span class="op">|</span><span class="ident">i</span><span class="op">|</span> <span class="macro">format!</span>(<span class="string">&quot;fred{}&quot;</span>, <span class="ident">i</span>));
    <span class="kw">let</span> <span class="ident">character</span> <span class="op">=</span> <span class="ident">iter</span>.<span class="ident">collect_robj</span>();
    <span class="macro">assert_eq!</span>(<span class="ident">character</span>, <span class="macro">r!</span>([<span class="string">&quot;fred0&quot;</span>, <span class="string">&quot;fred1&quot;</span>, <span class="string">&quot;fred2&quot;</span>]));
}</code></pre></div>
<p>To index a vector, first convert it to a slice and then
remember to use 0-based indexing. In Rust, going out of bounds
will cause and error (a panic) unlike C++ which may crash.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;
<span class="macro">test!</span> {
    <span class="kw">let</span> <span class="ident">vals</span> <span class="op">=</span> <span class="macro">r!</span>([<span class="number">1.0</span>, <span class="number">2.0</span>]);
    <span class="kw">let</span> <span class="ident">slice</span> <span class="op">=</span> <span class="ident">vals</span>.<span class="ident">as_real_slice</span>().<span class="ident">ok_or</span>(<span class="string">&quot;expected slice&quot;</span>)<span class="question-mark">?</span>;
    <span class="kw">let</span> <span class="ident">one</span> <span class="op">=</span> <span class="ident">slice</span>[<span class="number">0</span>];
    <span class="kw">let</span> <span class="ident">two</span> <span class="op">=</span> <span class="ident">slice</span>[<span class="number">1</span>];
    <span class="comment">// let error = slice[2];</span>
    <span class="macro">assert_eq!</span>(<span class="ident">one</span>, <span class="number">1.0</span>);
    <span class="macro">assert_eq!</span>(<span class="ident">two</span>, <span class="number">2.0</span>);
}</code></pre></div>
<p>Much slower, but more general are these methods:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;
<span class="macro">test!</span> {
    <span class="kw">let</span> <span class="ident">vals</span> <span class="op">=</span> <span class="macro">r!</span>([<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>]);
    
    <span class="comment">// one-based indexing [[i]], returns an object.</span>
    <span class="macro">assert_eq!</span>(<span class="ident">vals</span>.<span class="ident">index</span>(<span class="number">1</span>)<span class="question-mark">?</span>, <span class="macro">r!</span>(<span class="number">1.0</span>));
    
    <span class="comment">// one-based slicing [x], returns an object.</span>
    <span class="macro">assert_eq!</span>(<span class="ident">vals</span>.<span class="ident">slice</span>(<span class="number">1</span>..<span class="op">=</span><span class="number">2</span>)<span class="question-mark">?</span>, <span class="macro">r!</span>([<span class="number">1.0</span>, <span class="number">2.0</span>]));
    
    <span class="comment">// $ operator, returns an object</span>
    <span class="kw">let</span> <span class="ident">list</span> <span class="op">=</span> <span class="macro">list!</span>(<span class="ident">a</span> <span class="op">=</span> <span class="number">1.0</span>, <span class="ident">b</span> <span class="op">=</span> <span class="string">&quot;xyz&quot;</span>);
    <span class="macro">assert_eq!</span>(<span class="ident">list</span>.<span class="ident">dollar</span>(<span class="string">&quot;a&quot;</span>)<span class="question-mark">?</span>, <span class="macro">r!</span>(<span class="number">1.0</span>));
}</code></pre></div>
<p>The <a href="macro.R.html" title="R!">R!</a> macro lets you embed R code in Rust
and takes Rust expressions in {{ }} pairs.</p>
<p>The <a href="macro.Rraw.html" title="Rraw!">Rraw!</a> macro will not expand the {{ }} pairs.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;
<span class="macro">test!</span> {
    <span class="comment">// The text &quot;1 + 1&quot; is parsed as R source code.</span>
    <span class="comment">// The result is 1.0 + 1.0 in Rust.</span>
    <span class="macro">assert_eq!</span>(<span class="macro">R!</span>(<span class="string">&quot;1 + 1&quot;</span>)<span class="question-mark">?</span>, <span class="macro">r!</span>(<span class="number">2.0</span>));

    <span class="kw">let</span> <span class="ident">a</span> <span class="op">=</span> <span class="number">1.0</span>;
    <span class="macro">assert_eq!</span>(<span class="macro">R!</span>(<span class="string">&quot;1 + {{a}}&quot;</span>)<span class="question-mark">?</span>, <span class="macro">r!</span>(<span class="number">2.0</span>));

    <span class="macro">assert_eq!</span>(<span class="macro">R!</span>(<span class="string">r&quot;
        x &lt;- {{ a }}
        x + 1
    &quot;</span>)<span class="question-mark">?</span>, <span class="macro">r!</span>(<span class="number">2.0</span>));

    <span class="macro">assert_eq!</span>(<span class="macro">R!</span>(<span class="string">r#&quot;
        x &lt;- &quot;hello&quot;
        x
    &quot;#</span>)<span class="question-mark">?</span>, <span class="macro">r!</span>(<span class="string">&quot;hello&quot;</span>));

    <span class="comment">// Use the R meaning of {{ }} and do not expand.</span>
    <span class="macro">assert_eq!</span>(<span class="macro">Rraw!</span>(<span class="string">r&quot;
        x &lt;- {{ 1 }}
        x + 1
    &quot;</span>)<span class="question-mark">?</span>, <span class="macro">r!</span>(<span class="number">2.0</span>));
}</code></pre></div>
<p>The <a href="macro.r.html" title="r!">r!</a> macro converts a rust object to an R object
and takes parameters.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;
<span class="macro">test!</span> {
    <span class="comment">// The text &quot;1.0+1.0&quot; is parsed as Rust source code.</span>
    <span class="kw">let</span> <span class="ident">one</span> <span class="op">=</span> <span class="number">1.0</span>;
    <span class="macro">assert_eq!</span>(<span class="macro">r!</span>(<span class="ident">one</span><span class="op">+</span><span class="number">1.0</span>), <span class="macro">r!</span>(<span class="number">2.0</span>));
}</code></pre></div>
<p>You can call R functions and primitives using the <a href="macro.call.html" title="call!">call!</a> macro.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;
<span class="macro">test!</span> {

    <span class="comment">// As one R! macro call</span>
    <span class="kw">let</span> <span class="ident">confint1</span> <span class="op">=</span> <span class="macro">R!</span>(<span class="string">&quot;confint(lm(weight ~ group - 1, PlantGrowth))&quot;</span>)<span class="question-mark">?</span>;
    
    <span class="comment">// As many parameterized calls.</span>
    <span class="kw">let</span> <span class="ident">formula</span> <span class="op">=</span> <span class="macro">lang!</span>(<span class="string">&quot;~&quot;</span>, <span class="macro">sym!</span>(<span class="ident">weight</span>), <span class="macro">lang!</span>(<span class="string">&quot;-&quot;</span>, <span class="macro">sym!</span>(<span class="ident">group</span>), <span class="number">1.0</span>)).<span class="ident">set_class</span>([<span class="string">&quot;formula&quot;</span>])<span class="question-mark">?</span>;
    <span class="kw">let</span> <span class="ident">plant_growth</span> <span class="op">=</span> <span class="macro">global!</span>(<span class="ident">PlantGrowth</span>)<span class="question-mark">?</span>;
    <span class="kw">let</span> <span class="ident">model</span> <span class="op">=</span> <span class="macro">call!</span>(<span class="string">&quot;lm&quot;</span>, <span class="ident">formula</span>, <span class="ident">plant_growth</span>)<span class="question-mark">?</span>;
    <span class="kw">let</span> <span class="ident">confint2</span> <span class="op">=</span> <span class="macro">call!</span>(<span class="string">&quot;confint&quot;</span>, <span class="ident">model</span>)<span class="question-mark">?</span>;
    
    <span class="macro">assert_eq!</span>(<span class="ident">confint1</span>.<span class="ident">as_real_vector</span>(), <span class="ident">confint2</span>.<span class="ident">as_real_vector</span>());
}</code></pre></div>
<p>Rust has a concept of “Owned” and “Borrowed” objects.</p>
<p>Owned objects, such as <a href="https://doc.rust-lang.org/1.61.0/alloc/vec/struct.Vec.html" title="Vec">Vec</a> and <a href="https://doc.rust-lang.org/1.61.0/alloc/string/struct.String.html" title="String">String</a> allocate memory
which is released when the object lifetime ends.</p>
<p>Borrowed objects such as &amp;<a href="https://doc.rust-lang.org/1.61.0/std/primitive.i32.html" title="i32">i32</a> and &amp;str are just pointers
to annother object’s memory and can’t live longer than the
object they reference.</p>
<p>Borrowed objects are much faster than owned objects and use less
memory but are used only for temporary access.</p>
<p>When we take a slice of an R vector, for example, we need the
original R object to be alive or the data will be corrupted.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;
<span class="macro">test!</span> {
    <span class="comment">// robj is an &quot;Owned&quot; object that controls the memory allocated.</span>
    <span class="kw">let</span> <span class="ident">robj</span> <span class="op">=</span> <span class="macro">r!</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);
    
    <span class="comment">// Here slice is a &quot;borrowed&quot; reference to the bytes in robj.</span>
    <span class="comment">// and cannot live longer than robj.</span>
    <span class="kw">let</span> <span class="ident">slice</span> <span class="op">=</span> <span class="ident">robj</span>.<span class="ident">as_integer_slice</span>().<span class="ident">ok_or</span>(<span class="string">&quot;expected slice&quot;</span>)<span class="question-mark">?</span>;
    <span class="macro">assert_eq!</span>(<span class="ident">slice</span>.<span class="ident">len</span>(), <span class="number">3</span>);
}</code></pre></div>
<h3 id="writing-tests"><a href="#writing-tests">Writing tests</a></h3>
<p>To test the functions exposed to R, wrap your code in the <a href="macro.test.html" title="test!"><code>test!</code></a> macro.
This macro starts up the necessary R machinery for tests to work.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;

<span class="attribute">#[<span class="ident">extendr</span>]</span>
<span class="kw">fn</span> <span class="ident">things</span>() -&gt;  <span class="ident">Strings</span> {
    <span class="ident">Strings::from_values</span>(<span class="macro">vec!</span>[<span class="string">&quot;Test&quot;</span>, <span class="string">&quot;this&quot;</span>])
}

<span class="comment">// define exports using extendr_module</span>
<span class="macro">extendr_module!</span> {
   <span class="kw">mod</span> <span class="ident">mymodule</span>;
   <span class="kw">fn</span> <span class="ident">things</span>;    
}


<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">test</span>)]</span>
<span class="kw">mod</span> <span class="ident">test</span> {
    <span class="kw">use</span> <span class="kw">super</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">extendr_api::prelude</span>::<span class="kw-2">*</span>;

    <span class="attribute">#[<span class="ident">test</span>]</span>
    <span class="kw">fn</span> <span class="ident">test_simple_function</span>() {
        <span class="macro">assert_eq!</span>(<span class="ident">things</span>().<span class="ident">elt</span>(<span class="number">0</span>), <span class="string">&quot;Test&quot;</span>)
    }
}</code></pre></div>
<h3 id="feature-gates"><a href="#feature-gates">Feature gates</a></h3>
<p>extendr-api has some optional features behind these feature gates:</p>
<ul>
<li><code>ndarray</code>: provides the conversion between R’s matrices and <a href="https://docs.rs/ndarray/latest/ndarray/">ndarray</a>.</li>
<li><code>num-complex</code>: provides the conversion between R’s complex numbers and <a href="https://docs.rs/num-complex/latest/num_complex/">num-complex</a>.</li>
<li><code>serde</code>: provides the <a href="https://serde.rs/">Serde</a> support.</li>
<li><code>graphics</code>: provides the functionality to control or implement graphics devices.</li>
</ul>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item"><code>pub use robj::<a class="struct" href="robj/struct.Robj.html" title="struct extendr_api::robj::Robj">Robj</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="error/index.html" title="mod extendr_api::error">error</a>::*;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="functions/index.html" title="mod extendr_api::functions">functions</a>::*;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="lang_macros/index.html" title="mod extendr_api::lang_macros">lang_macros</a>::*;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="na/index.html" title="mod extendr_api::na">na</a>::*;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="rmacros/index.html" title="mod extendr_api::rmacros">rmacros</a>::*;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="robj/index.html" title="mod extendr_api::robj">robj</a>::*;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use thread_safety::<a class="fn" href="thread_safety/fn.catch_r_error.html" title="fn extendr_api::thread_safety::catch_r_error">catch_r_error</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use thread_safety::handle_panic;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use thread_safety::<a class="fn" href="thread_safety/fn.single_threaded.html" title="fn extendr_api::thread_safety::single_threaded">single_threaded</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use thread_safety::<a class="fn" href="thread_safety/fn.this_thread_id.html" title="fn extendr_api::thread_safety::this_thread_id">this_thread_id</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use thread_safety::<a class="fn" href="thread_safety/fn.throw_r_error.html" title="fn extendr_api::thread_safety::throw_r_error">throw_r_error</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="wrapper/index.html" title="mod extendr_api::wrapper">wrapper</a>::*;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="robj_ndarray/index.html" title="mod extendr_api::robj_ndarray">robj_ndarray</a>::*;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use metadata::<a class="struct" href="metadata/struct.Metadata.html" title="struct extendr_api::metadata::Metadata">Metadata</a>;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="deserializer/index.html" title="extendr_api::deserializer mod">deserializer</a></div><div class="item-right docblock-short"><p>Convert R objects to a wide variety of types.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="error/index.html" title="extendr_api::error mod">error</a></div><div class="item-right docblock-short"><p>Error handling in Rust called from R.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="functions/index.html" title="extendr_api::functions mod">functions</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="graphics/index.html" title="extendr_api::graphics mod">graphics</a></div><div class="item-right docblock-short"><p>Graphic Device Operations</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="io/index.html" title="extendr_api::io mod">io</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="iter/index.html" title="extendr_api::iter mod">iter</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="lang_macros/index.html" title="extendr_api::lang_macros mod">lang_macros</a></div><div class="item-right docblock-short"><p>Argument parsing and checking.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="metadata/index.html" title="extendr_api::metadata mod">metadata</a></div><div class="item-right docblock-short"><p>Module metadata</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="na/index.html" title="extendr_api::na mod">na</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="ownership/index.html" title="extendr_api::ownership mod">ownership</a></div><div class="item-right docblock-short"><p>Maintain ownership of R objects.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="prelude/index.html" title="extendr_api::prelude mod">prelude</a></div><div class="item-right docblock-short"><p>Common exports for extendr-api.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="rmacros/index.html" title="extendr_api::rmacros mod">rmacros</a></div><div class="item-right docblock-short"><p>rmacros - a set of macros to call actual R functions in a rusty way.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="robj/index.html" title="extendr_api::robj mod">robj</a></div><div class="item-right docblock-short"><p>R object handling.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="robj_ndarray/index.html" title="extendr_api::robj_ndarray mod">robj_ndarray</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="scalar/index.html" title="extendr_api::scalar mod">scalar</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="serializer/index.html" title="extendr_api::serializer mod">serializer</a></div><div class="item-right docblock-short"><p>See <a href="https://serde.rs/impl-serializer.html">https://serde.rs/impl-serializer.html</a></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="thread_safety/index.html" title="extendr_api::thread_safety mod">thread_safety</a></div><div class="item-right docblock-short"><p>Provide limited protection for multithreaded access to the R API.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="wrapper/index.html" title="extendr_api::wrapper mod">wrapper</a></div><div class="item-right docblock-short"><p>Wrappers are lightweight proxies for references to R datatypes.
They do not contain an Robj (see array.rs for an example of this).</p>
</div></div></div><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.R.html" title="extendr_api::R macro">R</a></div><div class="item-right docblock-short"><p>Execute R code by parsing and evaluating tokens.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.Rraw.html" title="extendr_api::Rraw macro">Rraw</a></div><div class="item-right docblock-short"><p>Execute R code by parsing and evaluating tokens
but without expanding parameters.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.call.html" title="extendr_api::call macro">call</a></div><div class="item-right docblock-short"><p>Call a function or primitive defined by a text expression with arbitrary parameters.
This currently works by parsing and evaluating the string in R, but will probably acquire
some shortcuts for simple expessions, for example by caching symbols and constant values.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.data_frame.html" title="extendr_api::data_frame macro">data_frame</a></div><div class="item-right docblock-short"><p>Create a dataframe.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.extendr_module.html" title="extendr_api::extendr_module macro">extendr_module</a></div><div class="item-right docblock-short"><p>Define a module and export symbols to R
Example:</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.factor.html" title="extendr_api::factor macro">factor</a></div><div class="item-right docblock-short"><p>Create a factor.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.global.html" title="extendr_api::global macro">global</a></div><div class="item-right docblock-short"><p>Get a global variable.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.lang.html" title="extendr_api::lang macro">lang</a></div><div class="item-right docblock-short"><p>A macro for constructing R langage objects.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.list.html" title="extendr_api::list macro">list</a></div><div class="item-right docblock-short"><p>Create a List R object from a list of name-value pairs.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.pairlist.html" title="extendr_api::pairlist macro">pairlist</a></div><div class="item-right docblock-short"><p>Create a Pairlist R object from a list of name-value pairs.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.r.html" title="extendr_api::r macro">r</a></div><div class="item-right docblock-short"><p>Convert a rust expression to an R object.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.reprint.html" title="extendr_api::reprint macro">reprint</a></div><div class="item-right docblock-short"><p>Print via the R error stream.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.reprintln.html" title="extendr_api::reprintln macro">reprintln</a></div><div class="item-right docblock-short"><p>Print with a newline via the R output stream.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.rprint.html" title="extendr_api::rprint macro">rprint</a></div><div class="item-right docblock-short"><p>Print via the R output stream.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.rprintln.html" title="extendr_api::rprintln macro">rprintln</a></div><div class="item-right docblock-short"><p>Print with a newline via the R output stream.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.sym.html" title="extendr_api::sym macro">sym</a></div><div class="item-right docblock-short"><p>The sym! macro install symbols.
You should cache your symbols in variables
as generating them is costly.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.test.html" title="extendr_api::test macro">test</a></div><div class="item-right docblock-short"><p>Macro for running tests.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.var.html" title="extendr_api::var macro">var</a></div><div class="item-right docblock-short"><p>Get a local variable from the calling function
or a global variable if no such variable exists.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Rany.html" title="extendr_api::Rany enum">Rany</a></div><div class="item-right docblock-short"><p>Enum use to unpack R objects into their specialist wrappers.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Rtype.html" title="extendr_api::Rtype enum">Rtype</a></div><div class="item-right docblock-short"><p>Type of R objects used by <a href="robj/struct.Robj.html#method.rtype" title="Robj::rtype">Robj::rtype</a>.</p>
</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.FALSE.html" title="extendr_api::FALSE constant">FALSE</a></div><div class="item-right docblock-short"><p>FALSE value eg. <code>r!(FALSE)</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.NA_INTEGER.html" title="extendr_api::NA_INTEGER constant">NA_INTEGER</a></div><div class="item-right docblock-short"><p>NA value for integers eg. <code>r!(NA_INTEGER)</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.NA_LOGICAL.html" title="extendr_api::NA_LOGICAL constant">NA_LOGICAL</a></div><div class="item-right docblock-short"><p>NA value for logical. <code>r!(NA_LOGICAL)</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.NA_REAL.html" title="extendr_api::NA_REAL constant">NA_REAL</a></div><div class="item-right docblock-short"><p>NA value for real values eg. <code>r!(NA_REAL)</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.NA_STRING.html" title="extendr_api::NA_STRING constant">NA_STRING</a></div><div class="item-right docblock-short"><p>NA value for strings. <code>r!(NA_STRING)</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.NULL.html" title="extendr_api::NULL constant">NULL</a></div><div class="item-right docblock-short"><p>NULL value eg. <code>r!(NULL)</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.TRUE.html" title="extendr_api::TRUE constant">TRUE</a></div><div class="item-right docblock-short"><p>TRUE value eg. <code>r!(TRUE)</code></p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Deref.html" title="extendr_api::Deref trait">Deref</a></div><div class="item-right docblock-short"><p>Used for immutable dereferencing operations, like <code>*v</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.DerefMut.html" title="extendr_api::DerefMut trait">DerefMut</a></div><div class="item-right docblock-short"><p>Used for mutable dereferencing operations, like in <code>*v = 1;</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.TryFrom.html" title="extendr_api::TryFrom trait">TryFrom</a></div><div class="item-right docblock-short"><p>Simple and safe type conversions that may fail in a controlled
way under some circumstances. It is the reciprocal of <a href="trait.TryInto.html" title="TryInto"><code>TryInto</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.TryInto.html" title="extendr_api::TryInto trait">TryInto</a></div><div class="item-right docblock-short"><p>An attempted conversion that consumes <code>self</code>, which may or may not be
expensive.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.rtype_to_sxp.html" title="extendr_api::rtype_to_sxp fn">rtype_to_sxp</a></div><div class="item-right docblock-short"><p>Convert extendr’s Rtype to R’s SEXPTYPE.
Panics if the type is Unknown.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.sxp_to_rtype.html" title="extendr_api::sxp_to_rtype fn">sxp_to_rtype</a></div><div class="item-right docblock-short"><p>Convert R’s SEXPTYPE to extendr’s Rtype.</p>
</div></div></div><h2 id="attributes" class="small-section-header"><a href="#attributes">Attribute Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.extendr.html" title="extendr_api::extendr attr">extendr</a></div><div class="item-right docblock-short"></div></div></div><h2 id="derives" class="small-section-header"><a href="#derives">Derive Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.IntoDataFrameRow.html" title="extendr_api::IntoDataFrameRow derive">IntoDataFrameRow</a></div><div class="item-right docblock-short"><p>Enable the construction of dataframes from arrays of structures.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.IntoRobj.html" title="extendr_api::IntoRobj derive">IntoRobj</a></div><div class="item-right docblock-short"><p>Derives an implementation of <code>From&lt;Struct&gt; for Robj</code> and <code>From&lt;&amp;Struct&gt; for Robj</code> on this struct.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.TryFromRobj.html" title="extendr_api::TryFromRobj derive">TryFromRobj</a></div><div class="item-right docblock-short"><p>Derives an implementation of <code>TryFrom&lt;Robj&gt; for Struct</code> and <code>TryFrom&lt;&amp;Robj&gt; for Struct</code> on this struct.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="extendr_api" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0 (fe5b13d68 2022-05-18)" ></div>
</body></html>